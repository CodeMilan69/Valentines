<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Raechel üíñ</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,600;1,600&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
    body { margin: 0; height: 100vh; background: #e3a5b3; font-family: 'Poppins', sans-serif; display: flex; justify-content: center; align-items: center; overflow: hidden; }
    
    .card { background: white; padding: 40px; border-radius: 24px; width: 340px; text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,.25); position: relative; z-index: 500; }
    h2 { font-family: 'Playfair Display'; font-size: 28px; color: #333; margin: 0; line-height: 1.2; }
    h2 span { color: #C9184A; font-style: italic; }

    .buttonArea { position: relative; height: 100px; margin-top: 20px; }
    button { position: absolute; padding: 14px 34px; border: none; border-radius: 30px; font-size: 16px; cursor: pointer; font-weight: bold; transition: transform 0.2s; }
    #yes { background: #ff4d6d; color: white; left: 20px; top: 25px; z-index: 501; }
    #no { background: #eee; color: #888; left: 220px; top: 25px; z-index: 501; transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); }
    
    .hint { position: absolute; bottom: -10px; width: 100%; left: 0; font-size: 11px; color: #ff85a1; font-style: italic; opacity: 0.8; }

    .scene { position: fixed; inset: 0; display: none; }
    .box { position: absolute; top: 45%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 25px 35px; border-radius: 14px; font-family: 'Playfair Display'; font-size: 24px; font-weight: 600; box-shadow: 0 10px 30px rgba(0,0,0,0.15); z-index: 50; white-space: nowrap; text-align: center; color: #333; border-left: 5px solid #ff4d6d; }
    
    #man { position: absolute; top: 40%; left: -150px; z-index: 100; }
    #craneContainer { position: absolute; top: 5%; left: -750px; z-index: 300; }
    
    #gymBench, #gymBarbell { position: absolute; top: 45%; left: 15%; display: none; }
    #gymBench { z-index: 5; }
    #gymBarbell { z-index: 150; pointer-events: none; }

    #armL, #armR { transform-origin: 50px 55px; }
    #legL, #legR { transform-origin: 50px 100px; }
    #manBody { transition: transform 0.05s linear; }

    #sirenWrap { position: absolute; top: 268px; left: 90px; width: 25px; height: 25px; z-index: 301; transform: translate(-50%, -50%); }
    .lightGlow { position: absolute; width: 30px; height: 30px; border-radius: 50%; animation: sirenFlash 0.4s infinite; }
    @keyframes sirenFlash { 0%, 100% { background: red; box-shadow: 0 0 20px red; } 50% { background: white; opacity: 0.2; } }

    .vibrate { animation: vibrate 0.1s infinite; }
    @keyframes vibrate { 0% { transform: translate(-50%, -50%) rotate(0.5deg); } 100% { transform: translate(-50%, -50%) rotate(-0.5deg); } }

    #stickHeart { opacity: 0; transform-origin: center; }
    .fast-beat { animation: beat 0.25s infinite alternate; }
    .slow-beat { animation: beat 0.8s infinite alternate; }
    @keyframes beat { from { transform: scale(1); } to { transform: scale(1.3); } }

    .photo { position: absolute; bottom: 110px; left: 50%; transform: translateX(-50%) translateY(40px); width: 250px; opacity: 0; transition: 1.5s; z-index: 400; border: 10px solid white; box-shadow: 0 20px 50px rgba(0,0,0,0.3); }
    .photo.show { opacity: 1; transform: translateX(-50%) translateY(0); animation: floatPhoto 4s ease-in-out infinite; }
    @keyframes floatPhoto { 0%, 100% { transform: translateX(-50%) translateY(0); } 50% { transform: translateX(-50%) translateY(-15px); } }

    .message { position: absolute; bottom: 40px; width: 100%; text-align: center; font-family: 'Playfair Display'; font-size: 22px; font-weight: 600; font-style: italic; opacity: 0; transition: 1s; z-index: 400; color: white; text-shadow: 2px 2px 10px rgba(0,0,0,0.3); }
    .message.show { opacity: 1; }
    
    .confetti { position: fixed; top: -50px; pointer-events: none; z-index: 1000; animation: fall linear forwards; }
    @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
</style>
</head>
<body>

<div class="card" id="card">
    <h2>Raechel, <span>will you</span> be my Valentine?</h2>
    <div class="buttonArea">
        <button id="yes">Yes üíñ</button>
        <button id="no">No üôà</button>
        <div class="hint">The 'No' button is currently out of order...</div>
    </div>
</div>

<div class="scene" id="scene">
    <div class="box" id="box">Thank you for saying yes<br><span style="font-size: 16px; font-weight: 400; color: #666;">(like you had a choice)</span></div>

    <div id="gymBench"><svg width="200" height="200" viewBox="0 0 100 100"><rect x="10" y="85" width="80" height="8" fill="#333"/><rect x="25" y="93" width="5" height="7" fill="#333"/><rect x="70" y="93" width="5" height="7" fill="#333"/></svg></div>
    <div id="gymBarbell"><svg width="200" height="200" viewBox="0 0 100 100"><g id="barbellWrap"><line x1="0" y1="40" x2="100" y2="40" stroke="#444" stroke-width="5"/><circle cx="5" cy="40" r="10" fill="black"/><circle cx="95" cy="40" r="10" fill="black"/></g></svg></div>
    
    <div id="craneContainer">
        <div id="sirenWrap"><div class="lightGlow"></div><span style="position:relative; z-index:2; font-size:16px;">üö®</span></div>
        <svg width="600" height="500" viewBox="0 0 600 500">
            <g id="w1">
                <circle cx="50" cy="420" r="25" fill="#111"/>
                <line x1="35" y1="420" x2="65" y2="420" stroke="#444" stroke-width="3"/>
                <line x1="50" y1="405" x2="50" y2="435" stroke="#444" stroke-width="3"/>
            </g>
            <g id="w2">
                <circle cx="120" cy="420" r="25" fill="#111"/>
                <line x1="105" y1="420" x2="135" y2="420" stroke="#444" stroke-width="3"/>
                <line x1="120" y1="405" x2="120" y2="435" stroke="#444" stroke-width="3"/>
            </g>
            <g id="w3">
                <circle cx="190" cy="420" r="25" fill="#111"/>
                <line x1="175" y1="420" x2="205" y2="420" stroke="#444" stroke-width="3"/>
                <line x1="190" y1="405" x2="190" y2="435" stroke="#444" stroke-width="3"/>
            </g>

            <rect x="20" y="350" width="220" height="70" rx="10" fill="#222"/>
            <rect x="40" y="280" width="100" height="80" rx="5" fill="#ffd700" stroke="black" stroke-width="2"/>
            <line x1="90" y1="330" x2="90" y2="345" stroke="black" stroke-width="3"/>
            <circle cx="90" cy="320" r="15" stroke="black" stroke-width="2" fill="white"/>
            <text x="90" y="326" font-size="18" text-anchor="middle">üòè</text>
            <text x="130" y="390" font-family="Poppins" font-weight="bold" font-size="20" fill="white">Lala</text>
            <path d="M180 350 L500 80 L510 90 L190 360 Z" fill="#ffd700" stroke="black"/>
            <line id="craneCable" x1="500" y1="85" x2="500" y2="85" stroke="#333" stroke-width="3"/>
            <g id="magnetGroup"><rect x="460" y="85" width="80" height="30" fill="#444" stroke="black"/><rect x="470" y="115" width="60" height="15" fill="red"/></g>
        </svg>
    </div>

    <svg id="man" width="120" height="200" viewBox="0 0 100 150">
        <g id="manBody">
            <circle cx="50" cy="25" r="15" stroke="black" stroke-width="3" fill="white"/>
            <text id="face" x="50" y="31" font-size="18" text-anchor="middle">üò§</text>
            <text id="stickHeart" x="50" y="65" font-size="16" text-anchor="middle">‚ù§Ô∏è</text>
            <line x1="50" y1="40" x2="50" y2="100" stroke="black" stroke-width="3"/>
            <line id="armL" x1="50" y1="55" x2="50" y2="90" stroke="black" stroke-width="4" />
            <line id="armR" x1="50" y1="55" x2="50" y2="90" stroke="black" stroke-width="4" />
            <text id="flowers" x="50" y="75" font-size="30" text-anchor="middle" opacity="0">üíê</text>
            <line id="legL" x1="50" y1="100" x2="50" y2="145" stroke="black" stroke-width="3" />
            <line id="legR" x1="50" y1="100" x2="50" y2="145" stroke="black" stroke-width="3" />
        </g>
    </svg>

    <img src="photo.png" class="photo" id="photo">
    <div class="message" id="msg">I am pretty sure these flowers won‚Äôt go to waste,<br>so will you accept these?</div>
</div>

<script>
const noBtn = document.getElementById("no"), yesBtn = document.getElementById("yes"), scene = document.getElementById("scene"), card = document.getElementById("card"), man = document.getElementById("man"), manBody = document.getElementById("manBody"), box = document.getElementById("box"), crane = document.getElementById("craneContainer"), gymBench = document.getElementById("gymBench"), gymBar = document.getElementById("gymBarbell"), barbellWrap = document.getElementById("barbellWrap"), face = document.getElementById("face"), flowers = document.getElementById("flowers"), photo = document.getElementById("photo"), msg = document.getElementById("msg"), aL = document.getElementById("armL"), aR = document.getElementById("armR"), lL = document.getElementById("legL"), lR = document.getElementById("legR"), stickHeart = document.getElementById("stickHeart");

let walkTime = 0, boxOffset = 0, yesScale = 1;
let wheelAngle = 0;
let isCraneMoving = false;

document.addEventListener("mousemove", (e) => {
    const r = noBtn.getBoundingClientRect();
    const p = 50, t = 80;
    const bX = r.left + r.width / 2, bY = r.top + r.height / 2;
    const dist = Math.hypot(e.clientX - bX, e.clientY - bY);
    if (dist < t) {
        const angle = Math.atan2(bY - e.clientY, bX - e.clientX);
        let nX = r.left + Math.cos(angle) * 150, nY = r.top + Math.sin(angle) * 150;
        const lX = window.innerWidth - r.width - p, lY = window.innerHeight - r.height - p;
        if (nX < p) nX = p + Math.random() * 100; if (nX > lX) nX = lX - Math.random() * 100;
        if (nY < p) nY = p + Math.random() * 100; if (nY > lY) nY = lY - Math.random() * 100;
        noBtn.style.position = "fixed"; noBtn.style.left = nX + "px"; noBtn.style.top = nY + "px";
        yesScale += 0.1; yesBtn.style.transform = `scale(${yesScale})`;
    }
});

function animateWheels() {
    if (!isCraneMoving) return;
    wheelAngle += 10;
    document.getElementById('w1').style.transform = `rotate(${wheelAngle}deg)`;
    document.getElementById('w1').style.transformOrigin = "50px 420px";
    document.getElementById('w2').style.transform = `rotate(${wheelAngle}deg)`;
    document.getElementById('w2').style.transformOrigin = "120px 420px";
    document.getElementById('w3').style.transform = `rotate(${wheelAngle}deg)`;
    document.getElementById('w3').style.transformOrigin = "190px 420px";
    requestAnimationFrame(animateWheels);
}

function updateWalk(s = 0.15) {
    walkTime += s; 
    lL.style.transform = `rotate(${Math.sin(walkTime) * 30}deg)`; 
    lR.style.transform = `rotate(${-Math.sin(walkTime) * 30}deg)`;
    aL.style.transform = `rotate(${-Math.sin(walkTime) * 20}deg)`; 
    aR.style.transform = `rotate(${Math.sin(walkTime) * 20}deg)`;
    manBody.style.transform = `translateY(${-Math.abs(Math.cos(walkTime * 2)) * 4}px)`;
}

yesBtn.onclick = () => { card.style.display="none"; scene.style.display="block"; intro(); };

function intro() {
    let pos = -150;
    const w = setInterval(() => {
        pos += 4; man.style.left = pos + "px"; updateWalk();
        if (pos >= window.innerWidth/2 - 120) {
            clearInterval(w); manBody.style.transform = "translateY(0)";
            aL.style.transform = "rotate(90deg)"; aR.style.transform = "rotate(85deg)";
            box.classList.add("vibrate");
            setTimeout(() => {
                box.classList.remove("vibrate"); face.textContent = "ü§î";
                setTimeout(() => { man.style.transform = "scaleX(-1)"; 
                    const e = setInterval(() => { pos -= 5; man.style.left = pos + "px"; updateWalk(); 
                        if (pos < -150) { clearInterval(e); gym(); } 
                    }, 16);
                }, 800);
            }, 1000);
        }
    }, 16);
}

function gym() {
    gymBench.style.display = gymBar.style.display = "block"; man.style.transform = "scaleX(1)";
    let pos = -150;
    const w = setInterval(() => {
        pos += 4; man.style.left = pos + "px"; updateWalk();
        if (pos >= window.innerWidth * 0.15) {
            clearInterval(w); 
            man.style.transform = "translate(40px, 110px) rotate(-90deg)";
            let start = Date.now();
            const lift = setInterval(() => {
                let elapsed = Date.now() - start;
                let dy = Math.sin(elapsed / 450) * 20 + 20;
                let isGoingUp = Math.cos(elapsed / 450) < 0; 
                face.textContent = isGoingUp ? "üò´" : "üò§";
                barbellWrap.style.transform = `translateY(${dy}px)`;
                if (elapsed > 4500) {
                    let shake = Math.sin(Date.now() / 30) * (isGoingUp ? 5 : 2);
                    lL.style.transform = `rotate(${shake}deg)`; lR.style.transform = `rotate(${-shake}deg)`;
                }
                aL.style.transform = `rotate(${95 - (dy/4)}deg) translateY(${dy - 58}px)`;
                aR.style.transform = `rotate(${95 - (dy/4)}deg) translateY(${dy - 58}px)`;
                if (elapsed > 9500) {
                    clearInterval(lift); man.style.transform = "scaleX(1)"; man.style.left = "-150px";
                    aL.style.transform = "rotate(0deg)"; aR.style.transform = "rotate(0deg)";
                    setTimeout(() => { gymBench.style.display = gymBar.style.display = "none"; face.textContent = "üò§"; strongPush(); }, 500);
                }
            }, 16);
        }
    }, 16);
}

function strongPush() {
    let pos = window.innerWidth * 0.15;
    const w = setInterval(() => {
        pos += 4; man.style.left = pos + "px"; updateWalk();
        if (pos >= window.innerWidth/2 - 120) {
            clearInterval(w);
            let pushDist = 0;
            const shoving = setInterval(() => {
                pushDist += 2; boxOffset = pushDist; man.style.left = (pos + pushDist) + "px";
                box.style.transform = `translate(calc(-50% + ${boxOffset}px), -50%)`;
                aL.style.transform = "rotate(90deg)"; aR.style.transform = "rotate(85deg)";
                if (pushDist >= 70) {
                    clearInterval(shoving);
                    box.classList.add("vibrate");
                    face.textContent = "üòñ"; 
                    setTimeout(() => { 
                        box.classList.remove("vibrate");
                        face.textContent = "üòÆ‚Äçüí®"; man.style.transform = "scaleX(-1)";
                        const e = setInterval(() => { 
                            let cur = parseFloat(man.style.left); cur -= 5; man.style.left = cur + "px"; updateWalk();
                            if (cur < -150) { clearInterval(e); craneSequence(); }
                        }, 16);
                    }, 1200);
                }
            }, 16);
        }
    }, 16);
}

function craneSequence() {
    let cx = -750; const target = (window.innerWidth/2 + boxOffset) - 470; 
    
    isCraneMoving = true;
    animateWheels();

    const d = setInterval(() => {
        cx += 6; crane.style.left = cx + "px";
        if (cx >= target) {
            clearInterval(d); 
            isCraneMoving = false;

            let y = 0;
            const l = setInterval(() => {
                y += 2.5; document.getElementById("craneCable").setAttribute("y2", 85 + y);
                document.getElementById("magnetGroup").style.transform = `translateY(${y}px)`;
                if (y >= 215) { 
                    clearInterval(l);
                    setTimeout(() => {
                        box.style.transition = "0.2s cubic-bezier(0.18, 0.89, 0.32, 1.28)"; box.style.top = "37.5%"; 
                        setTimeout(() => {
                            isCraneMoving = true;
                            animateWheels();
                            const drive = setInterval(() => {
                                cx += 7; crane.style.left = cx + "px";
                                box.style.left = (window.innerWidth/2 + 30 + boxOffset + (cx-target)) + "px";
                                if (cx > window.innerWidth + 600) { 
                                    clearInterval(drive); 
                                    isCraneMoving = false;
                                    final(); 
                                }
                            }, 16);
                        }, 500);
                    }, 300);
                }
            }, 16);
        }
    }, 16);
}

function final() {
    let pos = window.innerWidth + 100; man.style.transform = "scaleX(-1)"; face.textContent = "ü´®";
    stickHeart.style.opacity = "1"; stickHeart.classList.add("fast-beat");
    const w = setInterval(() => {
        pos -= 4; man.style.left = pos + "px"; updateWalk(0.2);
        if (pos <= window.innerWidth/2 - 60) {
            clearInterval(w); 
            man.style.transform = "scaleX(1)"; manBody.style.transform = "translateY(0)";
            stickHeart.classList.remove("fast-beat"); stickHeart.classList.add("slow-beat");
            face.textContent = "ü•π"; flowers.style.opacity = "1"; 
            aL.style.transform = "rotate(-35deg) translate(8px, -5px)"; aR.style.transform = "rotate(35deg) translate(-8px, -5px)";
            lL.style.transform = "rotate(0)"; lR.style.transform = "rotate(0)";
            photo.classList.add("show"); msg.classList.add("show");
            
            const ems = ['üíñ', 'üå∏', 'üåπ', 'üíï', '‚ú®'];
            for(let i=0; i<30; i++) {
                const c = document.createElement('div'); c.className = 'confetti';
                c.innerText = ems[Math.floor(Math.random()*ems.length)];
                c.style.left = Math.random() * 100 + 'vw'; c.style.animationDuration = (Math.random() * 2 + 2) + 's';
                document.body.appendChild(c); setTimeout(() => c.remove(), 4000);
            }
        }
    }, 16);
}
</script>
</body>
</html>